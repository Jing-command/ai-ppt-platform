# Iteration 3 验收标准 - 大纲编辑器

**项目**: AI PPT Platform  
**迭代**: Iteration 3 - 大纲编辑器  
**创建日期**: 2026-02-13  
**状态**: 开发完成，待验收

---

## ✅ 功能验收检查项

### 1. 大纲列表页面 (`/outlines`)
| 检查项 | 状态 | 备注 |
|--------|------|------|
| 显示大纲列表 | ⏳ | 需验证渲染 |
| 点击大纲进入编辑 | ⏳ | 跳转 `/outlines/[id]` |
| 删除大纲功能 | ⏳ | 确认删除对话框 |
| 空状态提示 | ⏳ | 无大纲时显示引导 |

### 2. AI 生成大纲 (`/outlines/new`)
| 检查项 | 状态 | 备注 |
|--------|------|------|
| 输入主题/提示词 | ⏳ | 最少10字符验证 |
| 选择页数 (1-20) | ⏳ | 滑块或输入框 |
| 生成按钮状态 | ⏳ | 加载中禁用 |
| 生成成功后跳转 | ⏳ | 跳转编辑页 |
| 生成失败提示 | ⏳ | 显示错误信息 |

> ⚠️ **阻塞问题**: DeepSeek API 未配置 (401 Unauthorized)

### 3. 大纲编辑页面 (`/outlines/[id]`)
| 检查项 | 状态 | 备注 |
|--------|------|------|
| 大纲结构渲染 | ⏳ | 层级清晰显示 |
| 编辑页面标题/内容 | ⏳ | 实时保存或手动保存 |
| 添加/删除页面 | ⏳ | 支持增删操作 |
| 页面排序 | ⏳ | 拖拽或按钮调整顺序 |
| 保存变更 | ⏳ | 保存成功提示 |

### 4. 背景设置弹窗
| 检查项 | 状态 | 备注 |
|--------|------|------|
| 打开弹窗 | ⏳ | 点击背景设置按钮 |
| 选择主题 | ⏳ | default/business/creative |
| 颜色方案选择 | ⏳ | 预设颜色或自定义 |
| 应用并保存 | ⏳ | 保存到大纲 |

---

## 🔌 前后端联调检查项

### API 连通性
| 端点 | 方法 | 状态 | 备注 |
|------|------|------|------|
| `/health` | GET | ✅ | 服务健康检查通过 |
| `/api/v1/auth/login` | POST | ✅ | 登录获取 token |
| `/api/v1/outlines` | GET | ✅ | 获取大纲列表正常 |
| `/api/v1/outlines` | POST | ⏳ | 需验证创建 |
| `/api/v1/outlines/{id}` | GET | ⏳ | 需验证获取详情 |
| `/api/v1/outlines/{id}` | PUT | ⏳ | 需验证更新 |
| `/api/v1/outlines/{id}` | DELETE | ⏳ | 需验证删除 |
| `/api/v1/outlines/generate` | POST | ❌ | DeepSeek API 未配置 |
| `/api/v1/presentations` | GET | ✅ | 列表正常 |
| `/api/v1/presentations` | POST | ❌ | 500 错误待修复 |

### 已知问题
| 问题 | 严重性 | 状态 | 备注 |
|------|--------|------|------|
| DeepSeek API 401 | 🔴 高 | ❌ | 需要配置 API key |
| PPT 生成 500 | 🔴 高 | ❌ | SQLAlchemy session bug |

---

## 🧪 基本测试用例

### TC-001: 大纲列表查看
```
前置: 用户已登录
步骤:
  1. 访问 /outlines
  2. 验证大纲列表渲染
预期: 显示大纲卡片列表，包含标题和更新时间
```

### TC-002: 手动创建大纲
```
前置: 用户已登录
步骤:
  1. 访问 /outlines/new
  2. 跳过 AI 生成，点击手动创建
  3. 输入标题 "测试大纲"
  4. 添加第一个页面
  5. 保存
预期: 创建成功，跳转到编辑页
```

### TC-003: 编辑大纲页面
```
前置: 已有大纲
步骤:
  1. 访问 /outlines/{id}
  2. 修改页面标题
  3. 点击保存
预期: 保存成功，提示已更新
```

### TC-004: 背景设置
```
前置: 在编辑页面
步骤:
  1. 点击背景设置按钮
  2. 选择主题 "business"
  3. 选择颜色方案
  4. 点击应用
预期: 弹窗关闭，设置保存
```

### TC-005: AI 生成大纲（需修复后测试）
```
前置: 配置 DeepSeek API key
步骤:
  1. 访问 /outlines/new
  2. 输入提示词 "生成一个关于AI的PPT大纲"
  3. 选择页数 5
  4. 点击生成
预期: 显示加载状态，成功后跳转编辑页
```

---

## 📋 验收通过标准

### 必须完成（P0）
- [ ] 大纲列表页面正常显示
- [ ] 手动创建大纲功能可用
- [ ] 编辑大纲并保存功能可用
- [ ] 背景设置弹窗正常

### 需要修复（P1）
- [ ] 修复 PPT 生成 500 错误
- [ ] 配置 DeepSeek API key
- [ ] AI 生成大纲功能可用

### 可选优化（P2）
- [ ] 页面拖拽排序
- [ ] 大纲预览功能
- [ ] 批量操作大纲

---

## 🚀 验收步骤

1. **启动服务**
   ```bash
   # 后端
   cd backend && source venv/bin/activate
   PYTHONPATH=./src uvicorn ai_ppt.main:app --host 0.0.0.0 --port 8000
   
   # 前端
   cd my-app && npm run dev
   ```

2. **执行测试用例**
   - 按 TC-001 到 TC-005 顺序测试
   - 记录失败的用例

3. **检查已知问题修复状态**
   - DeepSeek API 配置
   - PPT 生成 500 错误

4. **填写验收结果**
   - 更新上表中的 ⏳ 为 ✅ 或 ❌
   - 记录发现的新问题

---

## 📝 验收记录

| 日期 | 验收人 | 结果 | 备注 |
|------|--------|------|------|
| 2026-02-13 | - | 待验收 | 创建文档，待修复后验收 |

---

## 📊 补充验收标准

### 5. 性能指标 ⏱️

| 指标 | 目标值 | 测试方法 | 状态 |
|------|--------|----------|------|
| 页面首屏加载 | < 2s | Lighthouse | ⏳ |
| API响应时间 | < 500ms | curl计时 | ⏳ |
| 大纲保存时间 | < 1s | 手动测试 | ⏳ |
| 生成PPT耗时 | < 30s | 异步任务监控 | ⏳ |

### 6. 兼容性要求 🌐

| 环境 | 要求 | 状态 |
|------|------|------|
| Chrome | 90+ | ⏳ |
| Firefox | 88+ | ⏳ |
| Safari | 14+ | ⏳ |
| Edge | 90+ | ⏳ |
| 移动端 | iOS Safari / Android Chrome | ⏳ |
| 分辨率 | 最低 1280x768，推荐 1920x1080 | ⏳ |

### 7. 安全要求 🔒

| 检查项 | 要求 | 状态 |
|--------|------|------|
| JWT认证 | Token有效期验证 | ✅ |
| 权限控制 | 用户只能操作自己的数据 | ✅ |
| 输入验证 | XSS防护、SQL注入防护 | ✅ |
| 文件上传 | 限制5MB，只允许图片格式 | ✅ |

### 8. 用户体验细节 ✨

| 检查项 | 要求 | 状态 |
|--------|------|------|
| 加载状态 | 按钮loading、骨架屏 | ✅ |
| 错误处理 | 网络错误提示、操作失败重试 | ✅ |
| 空状态 | 无数据时的引导文案 | ✅ |
| 操作反馈 | 保存成功toast、删除确认 | ✅ |

### 9. 边界情况测试 🔧

| 测试场景 | 预期结果 | 状态 |
|----------|----------|------|
| 创建100页大纲 | 正常加载，不卡顿 | ⏳ |
| 标题输入500字符 | 正常保存，显示截断 | ⏳ |
| 特殊字符输入（emoji） | 正常显示，不报错 | ⏳ |
| 网络断开后重连 | 自动恢复，数据不丢 | ⏳ |
| 快速连续保存 | 防抖处理，最后一次生效 | ⏳ |

### 10. 数据完整性 💾

| 检查项 | 要求 | 状态 |
|--------|------|------|
| 保存后刷新 | 数据不丢失 | ✅ |
| 并发编辑 | 后保存者覆盖（或冲突提示） | ⏳ |
| 意外关闭恢复 | 如有自动保存，可恢复草稿 | ⏳ |

### 11. 回归测试清单 🔄

**每次修复bug后必须验证：**

- [ ] 大纲列表正常显示
- [ ] 旧大纲能正常编辑
- [ ] 已保存的PPT能正常打开
- [ ] 用户登录状态保持
- [ ] 权限控制正常工作

### 12. 监控和日志 📊

| 检查项 | 要求 | 状态 |
|--------|------|------|
| 错误日志 | 记录到日志文件 | ✅ |
| API成功率 | 可监控统计 | ⏳ |
| 用户行为统计 | 生成/保存次数统计 | ⏳ |

---

*文档版本: 1.1 | 更新日期: 2026-02-13 | 补充性能、兼容性、安全等验收标准*
